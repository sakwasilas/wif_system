{% extends "base.html" %}

{% block content %}
<div class="container d-flex justify-content-center align-items-center" style="min-height: 90vh;">

  <div id="main-card" class="card shadow-lg border-0"
       style="width: 100%; max-width: 600px; background-color: #f8f9fa;">

    <!-- HEADER -->
    <div class="card-header text-white
      {% if status == 'active' %}bg-success
      {% elif status == 'grace' %}bg-warning
      {% elif status == 'suspended' %}bg-danger
      {% else %}bg-secondary
      {% endif %}">

      <div class="text-center">
        <h4 class="mb-1">Intersurf Cable Ltd - {{ customer.name }}</h4>

        {% if status == 'active' %}
          <h5>Your subscription is active</h5>
        {% elif status == 'grace' %}
          <h5>Grace Active (Today Only)</h5>
        {% elif status == 'suspended' %}
          <h5>Subscription Suspended</h5>
        {% endif %}
      </div>
    </div>

    <!-- BODY -->
    <div class="card-body text-center">
      <p class="fw-bold">{{ short_message }}</p>

      {% if start_date and subscription_end %}
      <p>
        Valid from <strong>{{ start_date }}</strong>
        to <strong>{{ subscription_end }}</strong>.
      </p>
      {% endif %}
    </div>

    <!-- FOOTER -->
    <div class="card-footer text-center text-muted">
      Â© {{ current_year }} Intersurf Cable Ltd
    </div>

  </div>
</div>

<!-- AUTO HIDE AFTER 5 SECONDS -->
<script>
window.addEventListener('DOMContentLoaded', () => {
    const card = document.getElementById('main-card');

    {% if status in ["active", "grace"] %}
    setTimeout(() => {
        if (card) card.style.display = 'none';
    }, 5000);
    {% endif %}
});
</script>

{% endblock %}
